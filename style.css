/* 1. VARIABILI E RESET */
:root {
    --bg: #0b0b0b;
    --card: #161616;
    --accent: #00ff41; 
    --text: #eee;
    --dim: #555;
}

* { box-sizing: border-box; }

body, html {
    background: var(--bg);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    margin: 0;
    padding: 0;
    overflow-x: hidden; /* Impedisce lo scroll laterale */
    position: relative;
    width: 100%;
}

/* 2. GRIGLIA RESPONSIVE (2 COLONNE FISSE SU MOBILE) */
#keep-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Due colonne uguali sempre */
    gap: 10px;
    padding: 10px;
    width: 100%;
}

@media (min-width: 768px) {
    #keep-grid { grid-template-columns: repeat(4, 1fr); }
}

/* 3. CARD: STILI E DIMENSIONI BLOCCATE */
.keep-card {
    background: var(--card);
    border: 1px solid #333;
    padding: 12px;
    border-radius: 8px;
    position: relative;
    min-height: 120px;
    max-height: 160px; /* Evita che si allunghino */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: grab;
    transition: transform 0.1s, border-color 0.2s;
    user-select: none; /* Impedisce di selezionare testo mentre trascini */
    touch-action: none; /* FONDAMENTALE per D&D su mobile: impedisce lo scroll della pagina */
}

.keep-card:active { cursor: grabbing; }

/* Feedback durante il Drag */
.keep-card.dragging {
    opacity: 0.4;
    transform: scale(0.95);
    border: 1px solid var(--accent) !important;
}

.keep-card.drag-over {
    border: 2px dashed var(--accent) !important;
}

/* 4. PINNATI E COLORI */
.keep-card.pinnato { border-top: 2px solid var(--accent) !important; }
.extra-card { border-left: 4px solid var(--accent) !important; }

.pin-indicator {
    position: absolute; top: 8px; right: 8px;
    font-size: 10px; color: var(--accent);
}

/* Bordi Colore Note */
.bg-default { border-left: 4px solid var(--dim); }
.bg-blue    { border-left: 4px solid #4285f4; }
.bg-red     { border-left: 4px solid #ea4335; }
.bg-green   { border-left: 4px solid #34a853; }
.bg-yellow  { border-left: 4px solid #fbbc05; }

/* 5. TESTI DENTRO LE CARD */
.title-row {
    font-weight: bold;
    color: var(--accent);
    font-size: 12px;
    margin-bottom: 6px;
    border-bottom: 1px solid rgba(0, 255, 65, 0.1);
    padding-bottom: 4px;
    text-transform: uppercase;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.content-preview {
    font-size: 11px;
    color: var(--text);
    opacity: 0.8;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}

.label { font-size: 9px; color: var(--dim); text-transform: uppercase; margin-top: auto; }

/* 6. MODAL CANCELLAZIONE (BELLO) */
#delete-modal {
    position: fixed; inset: 0; background: rgba(0,0,0,0.9);
    z-index: 20000; display: none; align-items: center; justify-content: center;
    backdrop-filter: blur(5px);
}

.modal-content {
    background: #111; border: 1px solid #333;
    padding: 30px; border-radius: 4px; text-align: center;
    width: 280px; box-shadow: 0 0 30px rgba(0,0,0,0.5);
}

.btn-group { display: flex; justify-content: space-around; margin-top: 20px; }
.btn-confirm { color: #ff4444; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 12px; }
.btn-cancel { color: #888; cursor: pointer; text-transform: uppercase; font-size: 12px; }

/* 7. SCHERMATA BOOT E ALTRO */
#boot-screen {
    position: fixed; inset: 0; background: #000; color: var(--accent);
    z-index: 999999; display: flex; flex-direction: column; padding: 20px;
}
#boot-logo-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
#boot-logo { width: 60px; filter: drop-shadow(0 0 10px var(--accent)); }

/* 8. NOTE DETAIL OVERLAY */
.note-overlay {
    position: fixed; inset: 0; background: var(--card);
    z-index: 10000; display: none; padding: 20px; flex-direction: column;
}

#detail-text {
    width: 100%; height: 60vh; background: transparent; border: none;
    color: var(--text); font-family: inherit; font-size: 16px; outline: none; resize: none;
}

.color-bubble {
    display: none; position: absolute; bottom: 70px; left: 50%;
    transform: translateX(-50%); background: #1a1a1a; border: 1px solid #333;
    border-radius: 30px; padding: 10px; gap: 10px; z-index: 1001;
}
.color-dot { width: 25px; height: 25px; border-radius: 50%; cursor: pointer; }