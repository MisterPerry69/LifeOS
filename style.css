/* ============================================
   SYSTEM_OS — OBSIDIAN GLASS STYLESHEET
   Tema: Dark Luxury · Rajdhani · Gold Ink
   Versione: 3.0
   ============================================ */

/* --- 1. DESIGN TOKENS & VARIABILI --- */
:root {
    /* Backgrounds */
    --bg:           #080709;
    --bg-2:         #0E0C10;
    --bg-3:         #141218;
    --card:         rgba(18, 16, 22, 0.88);
    --card-solid:   #12101A;

    /* Accents */
    --accent:       #D4A843;          /* Oro elettrico — accento primario */
    --accent-dim:   rgba(212,168,67,0.15);
    --accent-glow:  rgba(212,168,67,0.08);
    --accent-border:rgba(212,168,67,0.22);

    /* Secondari per moduli */
    --blue:         #5BA8E5;          /* Finance / Credits */
    --blue-dim:     rgba(91,168,229,0.12);
    --blue-border:  rgba(91,168,229,0.2);
    --green:        #4CAF7D;          /* Body / Health */
    --green-dim:    rgba(76,175,125,0.12);
    --red:          #E05C5C;          /* Danger / delete */
    --orange:       #E07A35;          /* Reviews / warnings */

    /* Testo */
    --text:         #F0EBE3;
    --text-2:       rgba(240,235,227,0.6);
    --text-3:       rgba(240,235,227,0.28);
    --dim:          rgba(240,235,227,0.45);

    /* Bordi & superfici */
    --border:       rgba(255,255,255,0.07);
    --border-2:     rgba(255,255,255,0.04);
    --surface:      rgba(255,255,255,0.03);
    --surface-2:    rgba(255,255,255,0.06);

    /* Effetti */
    --blur:         blur(24px);
    --blur-heavy:   blur(40px);
    --shadow:       0 20px 60px rgba(0,0,0,0.6);
    --shadow-sm:    0 4px 16px rgba(0,0,0,0.4);
    --radius:       6px;
    --radius-sm:    4px;
    --radius-lg:    12px;

    /* Typography */
    --font-main:    'Rajdhani', sans-serif;
    --font-mono:    'DM Mono', 'JetBrains Mono', monospace;
}

/* --- 2. RESET & BASE --- */
*, *::before, *::after {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    box-sizing: border-box;
}

input, textarea, [contenteditable="true"] {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
}

body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-main);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    /* Ambient background glow */
    background-image:
        radial-gradient(ellipse 800px 600px at 80% -10%, rgba(212,168,67,0.04) 0%, transparent 60%),
        radial-gradient(ellipse 600px 500px at -10% 80%, rgba(91,100,180,0.04) 0%, transparent 60%);
    background-attachment: fixed;
}

/* --- 3. BOOT SCREEN --- */
#boot-screen {
    position: fixed;
    inset: 0;
    background: #000;
    color: var(--accent);
    font-family: var(--font-mono);
    z-index: 999999;
    display: flex;
    flex-direction: column;
    padding: 20px;
}

#boot-text {
    font-size: 11px;
    text-transform: uppercase;
    white-space: pre-wrap;
    margin-bottom: 10px;
    opacity: 0.7;
    letter-spacing: 0.05em;
    line-height: 1.6;
}

.cursor {
    display: inline-block;
    width: 8px;
    height: 14px;
    background: var(--accent);
    animation: blink 0.8s infinite;
}

@keyframes blink { 50% { opacity: 0; } }

#boot-logo-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#boot-logo {
    width: 60px;
    height: 60px;
    filter: drop-shadow(0 0 16px var(--accent)) sepia(1) saturate(2) hue-rotate(10deg);
}

.boot-spinner {
    width: 60px;
    height: 2px;
    background: var(--border);
    position: relative;
    overflow: hidden;
    margin-top: 16px;
}

.boot-spinner::after {
    content: "";
    position: absolute;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
    animation: loading-bar 1.4s infinite linear;
}

@keyframes loading-bar {
    0% { left: -100%; }
    100% { left: 100%; }
}

/* --- 4. LAYOUT & PAGES --- */
.page {
    display: none;
    min-height: 100vh;
    box-sizing: border-box;
    padding: 20px;
    padding-bottom: 110px;
}

.page.active {
    display: flex;
    flex-direction: column;
}

#braindump.page {
    height: 100vh;
    padding: 0;
    overflow: hidden;
}

#braindump main {
    flex: 1;
    overflow-y: auto;
    padding: 0 16px 100px 16px;
}

/* --- 5. HEADER --- */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 20px;
    height: 80px;
    box-sizing: border-box;
    position: relative;
}

/* Linea accent in cima all'header */
.header::after {
    content: '';
    position: absolute;
    bottom: 0; left: 20px; right: 20px;
    height: 1px;
    background: var(--border);
}

.header h1 {
    font-family: var(--font-main);
    font-size: 13px;
    margin: 0;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    font-weight: 700;
    transition: opacity 0.3s;
}

.header .info {
    font-size: 10px;
    color: var(--text-3);
    text-align: right;
    cursor: pointer;
    font-family: var(--font-mono);
    letter-spacing: 0.1em;
    transition: color 0.2s;
}

.header .info:hover { color: var(--accent); }

.header-left {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-shrink: 0;
}

/* Status indicator */
.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.2em;
    color: var(--text-3);
    text-transform: uppercase;
}

.blink-dot {
    width: 5px;
    height: 5px;
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 6px var(--accent);
    animation: pulse-glow 2s infinite;
    flex-shrink: 0;
}

@keyframes pulse-glow {
    0%, 100% { opacity: 1; box-shadow: 0 0 6px var(--accent); }
    50% { opacity: 0.3; box-shadow: none; }
}

.node-info {
    font-family: var(--font-mono);
    font-size: 9px;
    color: var(--text-3);
    letter-spacing: 0.1em;
}

/* ESC button */
.esc-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-3);
    padding: 5px 10px;
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.15em;
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
}

.esc-btn:hover {
    color: var(--text);
    border-color: var(--accent-border);
}

/* --- 6. INPUTS --- */
input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 14px 16px;
    color: var(--text);
    font-family: var(--font-main);
    font-size: 14px;
    letter-spacing: 0.05em;
    outline: none;
    margin-bottom: 16px;
    transition: all 0.2s;
}

input::placeholder {
    color: var(--text-3);
    letter-spacing: 0.1em;
    font-size: 12px;
}

input:focus {
    border-color: var(--accent-border);
    background: var(--accent-glow);
    box-shadow: 0 0 0 1px var(--accent-border);
}

#dump-input {
    margin-top: 12px;
    background: var(--bg-2);
    border-color: var(--border);
    color: var(--text);
}

#dump-input:focus {
    border-color: var(--accent-border);
    background: var(--accent-glow);
}

/* --- 7. SEARCH --- */
.title-zone {
    position: relative;
    display: flex;
    align-items: center;
    flex: 1;
    height: 40px;
    overflow: visible;
}

.search-wrapper {
    position: absolute;
    right: 0;
    width: 0;
    height: 32px;
    background: var(--bg);
    overflow: hidden;
    transition: width 0.4s cubic-bezier(0.4,0,0.2,1);
    display: flex;
    z-index: 50;
}

.search-wrapper.active { width: calc(100% + 5px); }

#search-input {
    width: 100% !important;
    background: transparent !important;
    border: 1px solid var(--accent-border) !important;
    color: var(--accent) !important;
    font-size: 12px !important;
    font-family: var(--font-mono) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.1em !important;
    padding: 2px 10px !important;
    margin: 0 !important;
    outline: none !important;
    border-radius: var(--radius-sm) !important;
}

#search-input:focus {
    background: var(--accent-glow) !important;
}

/* --- 8. KEEP GRID (BRAIN DUMP) --- */
#keep-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    width: 100%;
    box-sizing: border-box;
    padding: 0;
}

@media (min-width: 768px) {
    #keep-grid { grid-template-columns: repeat(4, 1fr); }
}

.keep-card {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 14px;
    border-radius: var(--radius);
    position: relative;
    min-height: 110px;
    height: auto;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: border-color 0.2s, transform 0.1s, box-shadow 0.2s;
    touch-action: none;
    cursor: pointer;
    width: 100%;
    word-wrap: break-word;
    backdrop-filter: var(--blur);
    -webkit-backdrop-filter: var(--blur);
    /* Gold top line */
    box-shadow: inset 0 1px 0 rgba(212,168,67,0.08);
}

.keep-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(212,168,67,0.2), transparent);
}

.keep-card:active {
    transform: scale(0.97);
    border-color: var(--accent-border);
}

.keep-card.dragging {
    opacity: 0.35;
    transform: scale(0.94);
    border-color: var(--accent-border) !important;
}

.keep-card.drag-over {
    border: 1px dashed var(--accent-border) !important;
    background: var(--accent-glow);
}

.keep-card.sync-success {
    border-color: var(--accent-border) !important;
    box-shadow: 0 0 20px rgba(212,168,67,0.15);
    transition: all 0.5s;
}

/* Card Color Borders */
.bg-default { border-left: 3px solid rgba(212,168,67,0.3) !important; }
.bg-blue    { border-left: 3px solid rgba(91,168,229,0.6) !important; }
.bg-red     { border-left: 3px solid rgba(224,92,92,0.6) !important; }
.bg-green   { border-left: 3px solid rgba(76,175,125,0.6) !important; }
.bg-yellow  { border-left: 3px solid rgba(212,168,67,0.8) !important; }
.bg-pink    { border-left: 3px solid rgba(220,120,180,0.6) !important; }
.extra-card { border-left: 3px solid var(--accent) !important; }

.title-row {
    font-family: var(--font-main);
    font-weight: 700;
    font-size: 11px;
    color: var(--accent);
    margin-bottom: 8px;
    border-bottom: 1px solid var(--border-2);
    padding-bottom: 5px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.content-preview {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--text-2);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.5;
}

.pin-indicator {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 10px;
    color: var(--accent);
    opacity: 0.7;
}

/* --- 9. HOME GRID --- */
#home-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 10px;
    flex: 1;
    padding: 10px 16px 16px 16px;
}

.home-module-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
    position: relative;
    overflow: hidden;
    padding: 20px 10px;
    backdrop-filter: var(--blur);
    -webkit-backdrop-filter: var(--blur);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
}

/* Gold shimmer top line on each module */
.home-module-btn::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(212,168,67,0.3), transparent);
    opacity: 0;
    transition: opacity 0.3s;
}

.home-module-btn:hover::before,
.home-module-btn:active::before { opacity: 1; }

.home-module-btn:active {
    transform: scale(0.97);
    background: var(--surface-2);
}

.home-module-btn[data-module="braindump"] .module-icon { color: var(--accent); }
.home-module-btn[data-module="braindump"]:active { border-color: var(--accent-border); }

.home-module-btn[data-module="finance"] .module-icon { color: var(--blue); }
.home-module-btn[data-module="finance"]:active { border-color: var(--blue-border); }

.home-module-btn[data-module="body"] .module-icon { color: var(--green); }
.home-module-btn[data-module="body"]:active { border-color: rgba(76,175,125,0.3); }

.home-module-btn[data-module="reviews"] .module-icon { color: var(--orange); }
.home-module-btn[data-module="reviews"]:active { border-color: rgba(224,122,53,0.3); }

.module-icon {
    width: 36px;
    height: 36px;
    opacity: 0.9;
}

.module-label {
    font-family: var(--font-main);
    font-size: 1rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text);
}

.module-value {
    font-family: var(--font-mono);
    font-size: 9px;
    color: var(--text-3);
    letter-spacing: 0.1em;
    text-align: center;
    text-transform: uppercase;
}

@keyframes data-ping {
    0% { box-shadow: 0 0 0 0 rgba(212,168,67,0.25); }
    100% { box-shadow: 0 0 0 20px rgba(212,168,67,0); }
}

.home-module-btn.data-loaded {
    animation: data-ping 0.5s ease-out;
}

/* --- 10. WIDGETS --- */
.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.widget {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    backdrop-filter: var(--blur);
}

.widget:active {
    border-color: var(--accent-border);
    background: var(--accent-glow);
}

.widget.sync-success {
    border-color: var(--accent-border) !important;
    background: var(--accent-dim) !important;
    transform: scale(1.02);
    transition: all 0.5s;
}

.widget i,
.widget svg {
    color: var(--accent);
    width: 30px;
    height: 30px;
    margin-bottom: 10px;
    opacity: 0.85;
}

.widget .label {
    font-family: var(--font-main);
    text-transform: uppercase;
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 0.1em;
    color: var(--text);
}

.widget .value {
    font-family: var(--font-mono);
    font-size: 10px;
    font-weight: 400;
    color: var(--dim);
    margin-top: 4px;
    letter-spacing: 0.08em;
}

/* --- 11. MODALS & OVERLAYS --- */
#modal-backdrop {
    position: fixed !important;
    top: 0 !important; left: 0 !important;
    width: 100% !important; height: 100% !important;
    background: rgba(0,0,0,0.85) !important;
    backdrop-filter: blur(8px) !important;
    z-index: 10000 !important;
    display: none;
}

.note-overlay {
    position: fixed;
    inset: 0;
    background: var(--card-solid);
    z-index: 21000;
    display: none;
    flex-direction: column;
    backdrop-filter: var(--blur-heavy);
    border-top: 1px solid var(--accent-border);
}

.note-overlay.active { display: flex !important; }
.note-overlay > * { position: relative; z-index: 10002; }

@media (min-width: 1024px) {
    #note-detail.note-overlay {
        width: 580px !important;
        height: 72vh !important;
        inset: auto !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        border: 1px solid var(--accent-border);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow), 0 0 60px rgba(212,168,67,0.08);
    }
}

#note-detail {
    position: fixed !important;
    top: 0 !important; left: 0 !important;
    width: 100% !important; height: 100% !important;
    z-index: 10001 !important;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
}

.modal-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 16px;
    overflow-y: auto;
}

#detail-text {
    width: 100%;
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text);
    font-family: var(--font-main);
    font-size: 15px;
    line-height: 1.6;
    letter-spacing: 0.02em;
    outline: none;
    resize: none;
}

/* --- 12. DELETE MODAL --- */
#delete-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.92);
    z-index: 30000;
    display: none;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(12px);
}

.modal-content {
    background: var(--bg-3);
    border: 1px solid var(--border);
    border-top: 1px solid rgba(224,92,92,0.3);
    padding: 32px;
    border-radius: var(--radius-lg);
    text-align: center;
    width: 300px;
    box-shadow: var(--shadow);
}

.modal-content p {
    color: var(--text-2);
    margin-bottom: 28px;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 0.15em;
    font-family: var(--font-mono);
    line-height: 1.6;
}

.modal-actions {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}

.btn-modal {
    flex: 1;
    padding: 12px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-family: var(--font-main);
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    transition: all 0.2s;
}

.btn-confirm {
    background: rgba(224,92,92,0.15);
    color: var(--red);
    border: 1px solid rgba(224,92,92,0.3);
}

.btn-confirm:hover {
    background: rgba(224,92,92,0.25);
    border-color: var(--red);
}

.btn-cancel {
    background: transparent;
    color: var(--dim);
    border: 1px solid var(--border);
}

.btn-cancel:hover {
    border-color: var(--text-2);
    color: var(--text);
}

/* --- 13. SIDEBAR MENU --- */
#menu-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(6px);
    z-index: 20000;
    display: none;
}

#side-menu {
    position: fixed;
    top: 0; left: -280px;
    width: 260px;
    height: 100%;
    background: var(--bg-2);
    z-index: 20001;
    transition: left 0.3s cubic-bezier(0.4,0,0.2,1);
    padding: 28px 16px;
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 6px;
}

#side-menu.open {
    left: 0;
    box-shadow: 30px 0 60px rgba(0,0,0,0.8);
}

.menu-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 13px 16px;
    border-radius: var(--radius);
    color: var(--text-2);
    cursor: pointer;
    font-family: var(--font-main);
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: all 0.15s;
    border: 1px solid transparent;
}

.menu-item:hover {
    color: var(--text);
    background: var(--surface);
}

.menu-item.active {
    background: var(--accent-dim);
    color: var(--accent);
    border-color: var(--accent-border);
}

.menu-item svg, .menu-item i {
    width: 16px;
    height: 16px;
    opacity: 0.8;
}

/* --- 14. TOOLBAR & COLOR PICKER --- */
.note-toolbar {
    height: 60px;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 16px;
    border-top: 1px solid var(--border);
    background: var(--bg-2);
    flex-shrink: 0;
}

.tool-icon {
    font-size: 18px;
    color: var(--text-3);
    cursor: pointer;
    transition: all 0.2s;
    padding: 10px;
    border-radius: var(--radius-sm);
}

.tool-icon:hover {
    color: var(--accent);
    background: var(--accent-glow);
}

#color-picker-bubble {
    position: absolute;
    bottom: 70px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-3);
    border: 1px solid var(--border);
    padding: 12px 16px;
    border-radius: 20px;
    display: none;
    gap: 10px;
    box-shadow: var(--shadow-sm);
    z-index: 22000;
}

.color-dot {
    width: 28px !important;
    height: 28px !important;
    border-radius: 50% !important;
    cursor: pointer;
    border: 2px solid rgba(255,255,255,0.08) !important;
    transition: transform 0.15s, box-shadow 0.15s;
    display: inline-block;
}

.color-dot:hover {
    transform: scale(1.2);
    box-shadow: 0 0 10px rgba(255,255,255,0.15);
}

.dot-default { background-color: rgba(212,168,67,0.4) !important; }
.dot-blue    { background-color: #5BA8E5 !important; }
.dot-red     { background-color: #E05C5C !important; }
.dot-green   { background-color: #4CAF7D !important; }
.dot-yellow  { background-color: #D4A843 !important; }
.dot-pink    { background-color: #D978A8 !important; }

/* --- 15. BOTTOM NAV --- */
.footer {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: var(--bg-2);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-around;
    padding: 14px;
    z-index: 999;
}

.btn {
    background: none;
    border: none;
    color: var(--text-2);
    font-size: 18px;
    cursor: pointer;
    transition: color 0.2s;
}

.btn:hover { color: var(--accent); }

/* Floating bottom nav */
.bottom-nav {
    position: fixed;
    bottom: 18px;
    left: 16px;
    right: 16px;
    width: auto;
    max-width: 420px;
    height: 62px;
    margin: 0 auto;
    background: rgba(14,12,16,0.92);
    backdrop-filter: var(--blur-heavy);
    -webkit-backdrop-filter: var(--blur-heavy);
    border: 1px solid var(--border);
    border-top: 1px solid var(--accent-border);
    border-radius: 20px;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 12px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(212,168,67,0.06);
    z-index: 9000;
}

.nav-home { flex: 1.2; }

.home-btn-circle {
    background: transparent;
    width: 38px;
    height: 38px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    border: 1px solid var(--accent-border);
    transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
    position: relative;
}

.home-btn-circle::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 13px;
    background: var(--accent);
    opacity: 0;
    filter: blur(8px);
    transition: opacity 0.3s;
}

.nav-home.active .home-btn-circle {
    background: var(--accent-dim);
    border-color: var(--accent);
    box-shadow: 0 0 16px rgba(212,168,67,0.3);
}

.nav-home.active .home-btn-circle::before { opacity: 0.2; }
.nav-home.active .home-btn-circle i { color: var(--accent) !important; }

.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    padding: 8px;
    cursor: pointer;
    transition: all 0.2s;
    border-radius: var(--radius);
}

.nav-item:active {
    transform: scale(0.94);
    background: var(--surface);
}

.nav-item svg, .nav-item i {
    width: 20px;
    height: 20px;
    color: var(--text-3);
    transition: color 0.2s;
}

.nav-item.active svg,
.nav-item.active i { color: var(--accent); }

.nav-item div {
    font-family: var(--font-mono);
    font-size: 8px;
    color: var(--text-3);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: color 0.2s;
}

.nav-item.active div { color: var(--accent); }

/* --- 16. QUICK MENU --- */
#quick-menu {
    position: fixed;
    bottom: 96px;
    right: 16px;
    width: 150px;
    background: var(--bg-3);
    backdrop-filter: var(--blur-heavy);
    -webkit-backdrop-filter: var(--blur-heavy);
    border: 1px solid var(--border);
    border-top: 1px solid var(--accent-border);
    border-radius: var(--radius-lg);
    padding: 10px;
    box-shadow: var(--shadow);
    z-index: 9001;
    display: flex;
    flex-direction: column;
    gap: 4px;
    opacity: 0;
    transform: translateY(10px) scale(0.95);
    pointer-events: none;
    transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
}

@media (min-width: 768px) {
    #quick-menu {
        left: 54%;
        right: auto;
        transform: translateX(-50%) translateY(10px) scale(0.95);
    }
    #quick-menu.active {
        transform: translateX(-50%) translateY(0) scale(1);
    }
}

#quick-menu.active {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

.quick-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 11px 14px;
    color: var(--text-2);
    font-family: var(--font-main);
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    cursor: pointer;
    border-radius: var(--radius);
    transition: all 0.15s;
}

.quick-option:hover,
.quick-option:active {
    background: var(--accent-glow);
    color: var(--accent);
    transform: translateX(3px);
}

.quick-option i {
    width: 16px;
    height: 16px;
    color: var(--accent);
    opacity: 0.8;
}

/* --- 17. FINANCE --- */
.finance-widget {
    grid-column: span 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.finance-card-main {
    background: var(--card);
    border: 1px solid var(--border);
    border-top: 1px solid var(--accent-border);
    padding: 20px;
    width: 100%;
    border-radius: var(--radius);
    text-align: center;
    backdrop-filter: var(--blur);
    box-shadow: inset 0 1px 0 rgba(212,168,67,0.06);
}

.big-money {
    font-size: 2.8rem;
    font-family: var(--font-main);
    font-weight: 700;
    color: var(--text);
    letter-spacing: 0.02em;
}

.asset-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    width: 100%;
}

.asset-card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 12px;
    display: flex;
    flex-direction: column;
    border-radius: var(--radius-sm);
}

.asset-val {
    font-size: 1.1rem;
    color: var(--accent);
    font-family: var(--font-mono);
}

.finance-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
}

.hp-bar-outer {
    width: 100%;
    height: 4px;
    background: var(--surface-2);
    border-radius: 2px;
    position: relative;
    overflow: hidden;
    margin-top: 6px;
}

.hp-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent) 0%, #8B6914 100%);
    width: 0%;
    transition: width 1s ease;
    border-radius: 2px;
}

/* Finance Controls */
.finance-controls {
    position: fixed;
    bottom: 30px; left: 20px; right: 20px;
    height: 50px;
    pointer-events: none;
}

.chip-btn, .fab-btn { pointer-events: auto; }

.chip-btn {
    position: absolute;
    bottom: 0; left: 20px;
    width: 50px; height: 50px;
    background: var(--card);
    border: 1px solid var(--accent-border);
    border-radius: var(--radius-sm);
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--accent);
    cursor: pointer;
    backdrop-filter: var(--blur);
}

.square-btn {
    width: 50px; height: 50px;
    background: var(--bg-2);
    border: 1px solid var(--accent-border);
    color: var(--accent);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    pointer-events: auto;
    position: absolute;
    transition: all 0.15s;
    border-radius: var(--radius-sm);
}

.square-btn:hover {
    background: var(--accent-dim);
}

.btn-left { left: 0; }
.btn-right { right: 0; }

/* Finance input zone */
.side-input-wrapper {
    position: fixed !important;
    bottom: 70px !important;
    left: 0 !important; right: 0 !important;
    width: 100% !important;
    background: var(--bg-2) !important;
    border-top: 1px solid var(--accent-border) !important;
    padding: 16px !important;
    transform: translateY(150%) !important;
    transition: transform 0.3s ease-out !important;
    z-index: 2000 !important;
    box-shadow: 0 -10px 30px rgba(0,0,0,0.8) !important;
}

.side-input-wrapper.active {
    transform: translateY(0) !important;
}

.side-input-wrapper input {
    width: 100%;
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--accent-border);
    color: var(--text);
    font-family: var(--font-main);
    font-size: 15px;
    letter-spacing: 0.05em;
    outline: none;
    padding: 8px 0;
    margin: 0;
}

#finance-input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 14px 16px;
    color: var(--text);
    font-family: var(--font-main);
    font-size: 1rem;
    letter-spacing: 0.05em;
    outline: none;
    border-radius: var(--radius-sm);
}

#finance-input:focus {
    border-color: var(--accent-border);
    background: var(--accent-glow);
}

/* Side bubble (analista / AI) */
.side-bubble {
    position: fixed !important;
    bottom: 85px !important;
    left: 15px !important; right: 15px !important;
    width: auto !important;
    background: var(--bg-3) !important;
    border: 1px solid var(--accent-border) !important;
    padding: 18px 16px !important;
    box-shadow: 0 -5px 30px rgba(0,0,0,0.7) !important;
    z-index: 9999 !important;
    display: none;
    border-radius: var(--radius);
    backdrop-filter: var(--blur-heavy) !important;
    transform: translateY(8px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
}

.side-bubble.active {
    display: block !important;
    transform: translateY(0);
    opacity: 1;
}

.side-bubble::before {
    content: "ANALISTA v1.04";
    position: absolute;
    top: -9px; left: 12px;
    background: var(--accent);
    color: #000;
    font-family: var(--font-mono);
    font-size: 8px;
    font-weight: 700;
    padding: 2px 7px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    border-radius: 2px;
}

/* Category filter chips */
.fin-categories-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 12px;
    max-width: 100%;
}

.cat-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    color: var(--dim);
    padding: 8px 16px;
    font-size: 11px;
    font-family: var(--font-main);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
    backdrop-filter: var(--blur);
}

.cat-btn i { width: 14px; height: 14px; }

.cat-btn.active {
    background: var(--accent-dim);
    border-color: var(--accent-border);
    color: var(--accent);
}

.cat-btn:hover {
    border-color: var(--accent-border);
    color: var(--accent);
    background: var(--accent-glow);
}

.time-btn {
    margin: 12px auto;
    border-color: var(--border);
    width: fit-content;
}

/* Finance stats */
.stats-card {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 14px;
    border-radius: var(--radius-sm);
    backdrop-filter: var(--blur);
}

.survival-bar-container {
    width: 100%;
    height: 4px;
    background: var(--surface-2);
    border-radius: 2px;
    margin-top: 10px;
    overflow: hidden;
}

#survival-bar-fill {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, var(--accent), rgba(212,168,67,0.5));
    border-radius: 2px;
    transition: width 1s ease;
}

.filter-chip {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 8px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.filter-chip i { width: 14px; height: 14px; color: var(--text-3); }
.filter-chip span {
    font-size: 8px;
    font-family: var(--font-mono);
    color: var(--text-3);
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.filter-chip.active {
    border-color: var(--accent-border);
    background: var(--accent-glow);
}

.filter-chip.active i,
.filter-chip.active span { color: var(--accent); }

#category-filters {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5px;
    padding: 8px 14px;
    background: transparent;
}

/* Wallet buttons */
.wallet-btn {
    flex: 1;
    padding: 7px;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-3);
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.1em;
    cursor: pointer;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
    transition: all 0.2s;
}

.wallet-btn.active {
    border-color: var(--blue-border);
    color: var(--blue);
    background: var(--blue-dim);
}

/* Finance log rows */
.trans-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 11px 0;
    border-bottom: 1px solid var(--border-2);
}

/* Efficiency bar */
.efficiency-bar-container {
    width: 100%;
    height: 3px;
    background: var(--surface-2);
    margin: 12px 0 4px;
    border-radius: 2px;
}

.efficiency-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), rgba(212,168,67,0.5));
    border-radius: 2px;
    transition: width 1s ease-in-out;
}

/* --- 18. AGENDA / TIMELINE --- */
.day-group {
    margin-bottom: 36px;
    border-left: 1px solid var(--border);
    padding-left: 20px;
    margin-left: 10px;
}

.day-label {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--accent);
    letter-spacing: 0.2em;
    background: var(--bg);
    padding: 0 10px;
    margin-left: -31px;
    margin-bottom: 16px;
    display: table;
    border-right: 2px solid var(--accent);
    text-transform: uppercase;
}

.event-node {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    background: var(--surface);
    margin-bottom: 8px;
    padding: 12px;
    border-radius: 0 var(--radius) var(--radius) 0;
    border-left: 2px solid transparent;
    transition: all 0.2s;
}

.event-node:hover {
    background: var(--accent-glow);
    border-left: 2px solid var(--accent);
}

.event-time {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--accent);
    background: var(--accent-glow);
    padding: 2px 7px;
    border-radius: 3px;
    min-width: 45px;
    text-align: center;
    letter-spacing: 0.05em;
}

.event-title {
    font-family: var(--font-main);
    font-size: 13px;
    color: var(--text);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-weight: 600;
}

/* --- 19. REVIEWS --- */
.reviews-scroll-area {
    padding: 16px;
    padding-bottom: 100px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.review-card {
    display: flex;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    height: 130px;
    transition: all 0.15s;
    overflow: hidden;
    backdrop-filter: var(--blur);
}

.review-card:active {
    transform: scale(0.98);
    border-color: var(--accent-border);
}

.poster-mini {
    width: 95px;
    height: 100%;
    background-size: cover;
    background-position: center;
    background-color: var(--bg-3);
    flex-shrink: 0;
}

.review-info {
    flex: 1;
    padding: 10px 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
    justify-content: space-between;
}

.review-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.review-title {
    font-family: var(--font-main);
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 0.05em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.rating-stars {
    color: var(--accent);
    font-size: 11px;
    display: flex;
    gap: 1px;
}

.review-comment {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--text-2);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 4px;
    font-style: italic;
}

.review-meta {
    margin-top: auto;
    display: flex;
    justify-content: space-between;
    font-family: var(--font-mono);
    font-size: 9px;
    text-transform: uppercase;
    color: var(--text-3);
    letter-spacing: 0.1em;
}

/* Review detail modal */
.review-detail-card {
    background: var(--bg-2) !important;
    border: 1px solid var(--border) !important;
    padding: 28px !important;
    width: 90%;
    max-width: 800px;
    border-radius: var(--radius-sm);
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
    display: block;
    box-shadow: var(--shadow);
}

.review-main-content {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 28px;
    margin-top: 20px;
}

.detail-poster-zone img {
    width: 100%;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    cursor: pointer;
}

.review-text-zone {
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.7;
    color: var(--text-2);
    white-space: pre-line;
}

#review-detail-modal {
    position: fixed !important;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.92) !important;
    backdrop-filter: blur(12px);
    z-index: 99999 !important;
    display: none;
    justify-content: center;
    align-items: center;
}

@media (max-width: 600px) {
    .review-detail-card { padding: 36px 16px 16px !important; }
    .review-main-content {
        display: flex;
        flex-direction: column;
        gap: 16px;
        align-items: center;
    }
    .detail-poster-zone { width: 160px; }
    .review-text-zone { text-align: left; width: 100%; }
    .review-card { height: auto !important; min-height: 110px; }
    .poster-mini { width: 90px; min-height: 110px; align-self: stretch; }
    .review-info { padding: 10px 8px !important; }
    .review-top { flex-direction: column !important; align-items: flex-start !important; gap: 3px; }
    .review-title { white-space: normal !important; font-size: 12px !important; }
}

.review-detail-card::-webkit-scrollbar { width: 3px; }
.review-detail-card::-webkit-scrollbar-thumb { background: var(--border); }

/* --- 20. SYNC & ANIMATIONS --- */
.sync-flash { animation: chrono-sync 0.6s ease-out; }

@keyframes chrono-sync {
    0% { background: var(--accent-dim); filter: brightness(1.4); }
    100% { background: transparent; filter: brightness(1); }
}

.sync-loading {
    opacity: 0.5;
    pointer-events: none;
    filter: blur(0.5px);
}

.dot-ani { display: inline-block; animation: dots 1.5s infinite; }
.blink { animation: blinker 1s linear infinite; }
@keyframes blinker { 50% { opacity: 0; } }

/* --- 21. BODY MODULE --- */
#body-coach-bubble {
    display: none;
    position: fixed;
    bottom: 82px;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 32px);
    max-width: 500px;
    background: var(--bg-3);
    border: 1px solid rgba(76,175,125,0.25);
    border-top: 1px solid rgba(76,175,125,0.5);
    border-radius: var(--radius-lg);
    padding: 20px;
    z-index: 9999;
    box-shadow: var(--shadow);
    font-family: var(--font-mono);
    font-size: 12px;
    backdrop-filter: var(--blur-heavy);
}

#body-coach-bubble.active {
    display: block;
    animation: slideUp 0.3s cubic-bezier(0.4,0,0.2,1);
}

@keyframes slideUp {
    from { transform: translateX(-50%) translateY(16px); opacity: 0; }
    to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

/* Habit pixels */
#habit-pixels { display: grid; gap: 4px; align-content: start; }

.habit-pixel {
    border-radius: 2px;
    background: var(--surface);
    border: 1px solid var(--border-2);
    cursor: pointer;
    transition: all 0.12s;
    position: relative;
    aspect-ratio: 1;
}

.habit-pixel.active { border-color: transparent; }
.habit-pixel.today { border-color: rgba(255,255,255,0.3) !important; border-width: 2px; }
.habit-pixel:active { transform: scale(0.88); }

.habit-chip {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border-radius: 18px;
    border: 1px solid var(--border);
    background: var(--surface);
    cursor: pointer;
    white-space: nowrap;
    font-family: var(--font-main);
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.08em;
    transition: all 0.2s;
    color: var(--dim);
    text-transform: uppercase;
}

.habit-chip.active {
    color: #000;
    border-color: transparent;
    background: var(--accent);
}

/* --- 22. SCROLLBARS --- */
::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent-border); }

#finance-log {
    max-height: 380px;
    overflow-y: auto;
    padding-bottom: 16px;
    padding-right: 4px;
    margin: 16px;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-border) transparent;
}

#filtered-results { scrollbar-width: thin; scrollbar-color: var(--accent-border) transparent; }

/* --- 23. APP PAGE --- */
.app-page {
    padding-bottom: 80px;
    height: calc(100vh - 130px);
    overflow-y: auto;
}

/* Finance page fix */
#finance.page, #reviews.page, #body.page {
    height: 100vh;
    padding: 0;
    overflow: hidden;
}

#braindump main::-webkit-scrollbar { display: none; }

/* Finance stats grid */
.stats-grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    padding: 8px;
}

@media (min-width: 768px) {
    .stats-grid-container { grid-template-columns: 1fr 1fr; }
    .full-width-card { grid-column: 1 / -1; }
}

.full-width-card { grid-column: 1 / -1; }

/* --- 24. NEURAL PANEL --- */
.neural-panel {
    background: var(--surface);
    border: 1px solid var(--accent-border);
    border-radius: var(--radius-lg);
    padding: 16px;
    margin-bottom: 20px;
    backdrop-filter: var(--blur);
}

.status-dot {
    display: inline-block;
    width: 7px; height: 7px;
    background: var(--green);
    border-radius: 50%;
    margin-right: 10px;
    box-shadow: 0 0 8px var(--green);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 0.4; }
    50% { opacity: 1; }
    100% { opacity: 0.4; }
}

/* Analyst bubble per reviews */
#reviews .side-bubble::before {
    content: "CRITIC_ANALYZER v2.0";
    position: absolute;
    top: -9px; left: 12px;
    background: var(--accent);
    color: #000;
    font-family: var(--font-mono);
    font-size: 8px;
    font-weight: 700;
    padding: 2px 7px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    border-radius: 2px;
}

#reviews .side-bubble {
    position: fixed;
    right: 16px;
    bottom: 85px;
    width: 270px;
    background: var(--bg-3);
    border: 1px solid var(--accent-border);
    padding: 16px;
    z-index: 9999;
    backdrop-filter: var(--blur-heavy);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    display: none;
}

#reviews .side-bubble.active {
    display: block;
    animation: slideUpBubble 0.35s cubic-bezier(0.165,0.84,0.44,1);
}

@keyframes slideUpBubble {
    from { transform: translateY(120px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Stealth input */
.stealth-input-wrapper {
    position: fixed !important;
    bottom: 110px;
    left: 16px; right: 16px;
    background: var(--bg-2);
    border: 1px solid var(--accent-border);
    border-radius: var(--radius-sm);
    transform: translateY(200%);
    transition: 0.3s ease;
    z-index: 1000;
}

.stealth-input-wrapper.active { transform: translateY(0); }

.stealth-input-wrapper input {
    width: 100%;
    background: transparent;
    border: none;
    color: var(--text);
    padding: 14px 16px;
    font-family: var(--font-main);
    font-size: 15px;
    outline: none;
    margin: 0;
}

/* FAB */
.fab-btn {
    position: fixed;
    bottom: 30px; right: 30px;
    width: 56px; height: 56px;
    background: var(--accent);
    color: #000;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 20px rgba(212,168,67,0.4);
    cursor: pointer;
    z-index: 99;
    transition: transform 0.2s;
}

.fab-btn:active { transform: scale(0.94); }

/* --- 25. MISC UTILITIES --- */
.label { font-family: var(--font-mono); font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-3); }

.analyst-anchor { position: relative; cursor: pointer; display: flex; align-items: center; }
.analyst-eye { color: var(--accent); transition: transform 0.3s; opacity: 0.7; }
.analyst-eye:hover { transform: scale(1.2); opacity: 1; }

.analyst-bubble {
    position: absolute;
    top: 30px; right: 0;
    background: var(--bg-3);
    border: 1px solid var(--accent-border);
    padding: 12px;
    font-size: 11px;
    width: 210px;
    display: none;
    z-index: 100;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-sm);
    font-family: var(--font-mono);
    color: var(--text-2);
    line-height: 1.5;
}

/* Brain search overlay */
#brain-search-overlay {
    background: var(--bg-2) !important;
    border-top: 1px solid var(--accent-border) !important;
    backdrop-filter: var(--blur-heavy);
}

/* Reviews stats container */
#reviews-stats-container {
    scrollbar-width: none;
    background: var(--bg);
}
#reviews-stats-container::-webkit-scrollbar { display: none; }

/* Charts */
#categoryChart { max-height: 180px !important; width: 100% !important; }

#finance-stats-view {
    display: none;
    padding: 16px 12px 150px 12px;
    width: 100%;
    box-sizing: border-box;
    overflow-y: auto !important;
    max-height: 100vh;
    height: 100%;
}

/* Body coach */
.burn-rate-container { width: 100%; margin-top: 10px; }

/* --- 26. PROGRESS & BARS --- */
@keyframes growBar {
    from { width: 0; }
    to { width: var(--target-width); }
}

.stats-bar-fill { animation: growBar 1s ease-out forwards; }

/* Survival bar */
.survival-box { margin-top: 12px; }

/* Sub assets */
.sub-assets { display: flex; justify-content: space-between; margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--border-2); }
.sub-item .label { font-size: 8px; opacity: 0.5; }
.sub-item span:not(.label) { font-family: var(--font-mono); font-size: 13px; color: var(--accent); }

/* Credits history engine */
#credits-history-engine {
    position: relative !important;
    top: 0 !important; left: 0 !important;
    display: block !important;
    visibility: visible !important;
    width: 100%;
    margin-bottom: 20px;
    background: var(--surface);
    padding: 14px;
    border: 1px solid var(--border);
    z-index: 10;
    border-radius: var(--radius-sm);
}